<div class="employment-container">
  <div class="employment-content">
    <div class="logo-header">
      <img src="assets/logo_resuelve.png" alt="Resuelve Logo" class="logo" />
    </div>

    <div class="progress-bar">
      <div class="progress-fill" style="width: 57%"></div>
    </div>

    <div class="step-indicator">
      <span class="step-text">Paso 4 de 7</span>
    </div>

    <div class="form-header">
      <h1>Datos Laborales</h1>
      <p class="subtitle">Cuéntanos sobre tu situación laboral</p>
    </div>

    <form [formGroup]="employmentForm" (ngSubmit)="onSubmit()" class="employment-form">
      <div class="form-group">
        <label for="tipoEmpleo">Tipo de Empleo <span class="required">*</span></label>
        <select 
          id="tipoEmpleo" 
          formControlName="tipoEmpleo"
          [class.error]="tipoEmpleo?.invalid && tipoEmpleo?.touched">
          <option value="">Selecciona...</option>
          <option value="empleado">Empleado</option>
          <option value="independiente">Trabajador Independiente</option>
          <option value="pensionado">Pensionado</option>
          <option value="estudiante">Estudiante</option>
          <option value="desempleado">Desempleado</option>
        </select>
      </div>

      @if (showEmployerFields()) {
        <div class="employer-section">
          <h3 class="section-title">Información del Empleador</h3>
          
          <div class="form-group">
            <label for="nombreEmpresa">
              {{ tipoEmpleo?.value === 'independiente' ? 'Actividad o Negocio' : 'Nombre de la Empresa' }}
              <span class="required">*</span>
            </label>
            <input 
              type="text" 
              id="nombreEmpresa" 
              formControlName="nombreEmpresa"
              [placeholder]="tipoEmpleo?.value === 'independiente' ? 'Ej: Consultoría IT' : 'Ej: ABC Company'"
              [class.error]="nombreEmpresa?.invalid && nombreEmpresa?.touched"
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="cargo">
                {{ tipoEmpleo?.value === 'independiente' ? 'Ocupación' : 'Cargo' }}
                <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="cargo" 
                formControlName="cargo"
                placeholder="Ej: Desarrollador"
                [class.error]="cargo?.invalid && cargo?.touched"
              />
            </div>

            <div class="form-group">
              <label for="telefonoEmpresa">
                {{ tipoEmpleo?.value === 'independiente' ? 'Teléfono de Contacto' : 'Teléfono de la Empresa' }}
                <span class="required">*</span>
              </label>
              <input 
                type="tel" 
                id="telefonoEmpresa" 
                formControlName="telefonoEmpresa"
                placeholder="Ej: 022345678"
                [class.error]="telefonoEmpresa?.invalid && telefonoEmpresa?.touched"
              />
              @if (telefonoEmpresa?.invalid && telefonoEmpresa?.touched && telefonoEmpresa?.errors?.['pattern']) {
                <div class="error-message">
                  <span>Debe ser un número de 7 a 10 dígitos</span>
                </div>
              }
            </div>
          </div>

          <div class="form-group">
            <label for="tiempoLaboral">
              {{ tipoEmpleo?.value === 'independiente' ? 'Tiempo en esta actividad' : 'Tiempo en la empresa' }}
              <span class="required">*</span>
            </label>
            <select 
              id="tiempoLaboral" 
              formControlName="tiempoLaboral"
              [class.error]="tiempoLaboral?.invalid && tiempoLaboral?.touched">
              <option value="">Selecciona...</option>
              <option value="0-6">Menos de 6 meses</option>
              <option value="6-12">6 meses a 1 año</option>
              <option value="1-3">1 a 3 años</option>
              <option value="3-5">3 a 5 años</option>
              <option value="5+">Más de 5 años</option>
            </select>
          </div>
        </div>
      }

      <div class="income-section">
        <h3 class="section-title">Ingresos Mensuales</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="ingresoMensual">Ingreso Principal (USD) <span class="required">*</span></label>
            <div class="input-with-icon">
              <span class="currency-symbol">$</span>
              <input 
                type="number" 
                id="ingresoMensual" 
                formControlName="ingresoMensual"
                placeholder="0.00"
                min="0"
                step="0.01"
                [class.error]="ingresoMensual?.invalid && ingresoMensual?.touched"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="otrosIngresos">Otros Ingresos (USD)</label>
            <div class="input-with-icon">
              <span class="currency-symbol">$</span>
              <input 
                type="number" 
                id="otrosIngresos" 
                formControlName="otrosIngresos"
                placeholder="0.00"
                min="0"
                step="0.01"
              />
            </div>
            <small class="help-text">Opcional: Arriendos, pensiones, etc.</small>
          </div>
        </div>

        <div class="total-income">
          <span class="label">Total Ingresos Mensuales:</span>
          <span class="amount">
            {{ (ingresoMensual?.value || 0) + (otrosIngresos?.value || 0) | currency:'USD':'symbol':'1.2-2' }}
          </span>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="goBack()">
          Volver
        </button>
        <button type="submit" class="btn-primary" [disabled]="employmentForm.invalid">
          Continuar
        </button>
      </div>
    </form>
  </div>
</div>
